{"version":3,"file":"static/webpack/static\\development\\pages\\cuenta.js.2fae250b260803088e7a.hot-update.js","sources":["webpack:///./utils/hooks.js"],"sourcesContent":["import React, { useEffect, useRef, useContext, useState } from 'react';\nimport firebase from '../credentials/servers';\nimport Dexie from 'dexie';\nimport 'firebase/auth';\n\n//local DB\nlet db = {};\nexport const useDB = () => {\n  db = new Dexie(\"localDB\");\n  db.version(1).stores({ user: 'key, user' })\n  db.open().then(() => console.log(\"OpenDB\")).catch(err => console.log(\"Error during open db \", err));\n}\n\n// Intervals for states\nexport const useInterval = (callback, delay) => {\n  const savedCallback = useRef();\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  useEffect(() => {\n    function tick() {\n      savedCallback.current();\n    }\n    if (delay !== null) {\n      let id = setInterval(tick, delay);\n      return () => clearInterval(id);\n    }\n  }, [delay]);\n}\n\n// Firebase Auth\nlet fbprovider, gprovider;\nexport const useLogout = () => firebase.auth().signOut();\n\nexport const setProviders = () => {\n  fbprovider = new firebase.auth.FacebookAuthProvider();\n  gprovider = new firebase.auth.GoogleAuthProvider();\n  firebase.auth().useDeviceLanguage();\n  fbprovider.setCustomParameters({ 'display': 'popup' });\n}\n\nexport const useLogin = data => {\n  if (data.type === true) firebase.auth().createUserWithEmailAndPassword(data.email, data.pass).catch(data.err);\n  else if (data.type === false) firebase.auth().signInWithEmailAndPassword(data.email, data.pass).catch(data.err);\n  else if (data.type === \"fb\") firebase.auth().signInWithRedirect(fbprovider).catch(data.err);\n  else if (data.type === \"g\") firebase.auth().signInWithRedirect(gprovider).catch(data.err);\n}\n\nexport const useAuth = listen => {\n  useEffect(() => {\n    const unsubscribe = firebase.auth().onAuthStateChanged(user => {\n      if (user) listen(user);\n      else listen(false);\n    });\n    return () => unsubscribe();\n  }, []);\n}\n\nexport const useAuthError = code => {\n  switch (code) {\n    case \"auth/app-deleted\":\n      return \"Fallo la conexion interna, intenta recargar la pagina.\"\n    case \"auth/app-not-authorized\":\n      return \"Esta aplicacion no esta autorizada para iniciar sesion aqui.\"\n    case \"auth/argument-error\":\n      return \"Se envio una solitud con parametros incorrectos.\"\n    case \"auth/invalid-api-key\":\n      return \"Las credenciales de la aplicacion son incorrectas.\"\n    case \"auth/invalid-user-token\":\n      return \"Parece que tu cuenta se invalido.\"\n    case \"auth/network-request-failed\":\n      return \"Comprueba tu conexion a internet.\"\n    case \"auth/operation-not-allowed\":\n      return \"Se trato de inicar sesion en proveedor no autorizado.\"\n    case \"auth/requires-recent-login\":\n      return \"Se registro una sesion anterior con el mismo usuario.\"\n    case \"auth/too-many-requests\":\n      return \"Se alcanzo el limite maximo de intentos.\"\n    case \"auth/unauthorized-domain\":\n      return \"Este sitio no esta autorizado para iniciar sesion aqui.\"\n    case \"auth/user-disabled\":\n      return \"Este usuario ha sido deshabilitado.\"\n    case \"auth/user-token-expired\":\n      return \"Las credenciales del usuario han expirado.\"\n    case \"auth/web-storage-unsupported\":\n      return \"Tu navegador o dispositivo no soporta el almacenamiento interno.\"\n    case \"auth/account-exists-with-different-credential\":\n      return \"Esta cuenta ya existe y esta registrada con otro metodo.\"\n    case \"auth/credential-already-in-used\":\n      return \"Las credenciales de esta cuenta ya estan en uso.\"\n    case \"auth/email-already-in-use\":\n      return \"Esta direccion de correo electronico ya esta registrado en otra cuenta.\"\n    case \"auth/user-not-found\":\n      return \"No se ha podido encontrar el usuario, intenta nuevamente.\"\n    case \"auth/weak-password\":\n      return \"Tu contraseña debe contener al menos 6 caracteres alfanumericos.\"\n    case \"auth/invalid-email\":\n      return \"El correo electronico no es valido.\"\n    case \"auth/wrong-password\":\n      return \"La contraseña no es la correcta, intena nuevamente.\"\n    case \"auth/user-not-found\":\n      return \"No se ha podido encontrar el usuario, intenta nuevamente.\"\n    case \"auth/user-not-found\":\n      return \"No se ha podido encontrar el usuario, intenta nuevamente.\"\n\n\n    default:\n      return \"Error desconocido intenta de nuevo.\"\n  }\n}\n\nexport const user = firebase.auth().currentUser;\n"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AAIA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAEA;AACA;AAhDA;AAkDA;AAEA;;;;A","sourceRoot":""}