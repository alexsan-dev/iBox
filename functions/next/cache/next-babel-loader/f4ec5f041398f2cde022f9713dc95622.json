{"ast":null,"code":"import React, { useEffect, useRef, useContext, useState } from 'react';\nimport firebase from '../credentials/servers';\nimport Dexie from 'dexie';\nimport 'firebase/auth'; //local DB\n\nlet db = {};\nexport const useDB = () => {\n  db = new Dexie(\"localDB\");\n  db.version(1).stores({\n    user: 'key, user'\n  });\n  db.open().then(() => console.log(\"OpenDB\")).catch(err => console.log(\"Error during open db \", err));\n}; // Intervals for states\n\nexport const useInterval = (callback, delay) => {\n  const savedCallback = useRef();\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n  useEffect(() => {\n    function tick() {\n      savedCallback.current();\n    }\n\n    if (delay !== null) {\n      let id = setInterval(tick, delay);\n      return () => clearInterval(id);\n    }\n  }, [delay]);\n}; // Firebase Auth\n\nlet fbprovider, gprovider;\nexport const useLogout = () => firebase.auth().signOut();\nexport const setProviders = () => {\n  fbprovider = new firebase.auth.FacebookAuthProvider();\n  gprovider = new firebase.auth.GoogleAuthProvider();\n  firebase.auth().useDeviceLanguage();\n  fbprovider.setCustomParameters({\n    'display': 'popup'\n  });\n};\nexport const useLogin = data => {\n  if (data.type === true) firebase.auth().createUserWithEmailAndPassword(data.email, data.pass).catch(data.err);else if (data.type === false) firebase.auth().signInWithEmailAndPassword(data.email, data.pass).catch(data.err);else if (data.type === \"fb\") firebase.auth().signInWithRedirect(fbprovider).catch(data.err);else if (data.type === \"g\") firebase.auth().signInWithRedirect(gprovider).catch(data.err);\n};\nexport const useAuth = listen => {\n  useEffect(() => {\n    const unsubscribe = firebase.auth().onAuthStateChanged(user => {\n      if (user) listen(user);else listen(false);\n    });\n    return () => unsubscribe();\n  }, []);\n};\nexport const user = firebase.auth().currentUser;","map":{"version":3,"sources":["C:/Users/ernesto/Desktop/iBox/utils/hooks.js"],"names":["React","useEffect","useRef","useContext","useState","firebase","Dexie","db","useDB","version","stores","user","open","then","console","log","catch","err","useInterval","callback","delay","savedCallback","current","tick","id","setInterval","clearInterval","fbprovider","gprovider","useLogout","auth","signOut","setProviders","FacebookAuthProvider","GoogleAuthProvider","useDeviceLanguage","setCustomParameters","useLogin","data","type","createUserWithEmailAndPassword","email","pass","signInWithEmailAndPassword","signInWithRedirect","useAuth","listen","unsubscribe","onAuthStateChanged","currentUser"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useContext, useState } from 'react';\nimport firebase from '../credentials/servers';\nimport Dexie from 'dexie';\nimport 'firebase/auth';\n\n//local DB\nlet db = {};\nexport const useDB = () => {\n  db = new Dexie(\"localDB\");\n  db.version(1).stores({ user: 'key, user' })\n  db.open().then(() => console.log(\"OpenDB\")).catch(err => console.log(\"Error during open db \", err));\n}\n\n// Intervals for states\nexport const useInterval = (callback, delay) => {\n  const savedCallback = useRef();\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  useEffect(() => {\n    function tick() {\n      savedCallback.current();\n    }\n    if (delay !== null) {\n      let id = setInterval(tick, delay);\n      return () => clearInterval(id);\n    }\n  }, [delay]);\n}\n\n// Firebase Auth\nlet fbprovider, gprovider;\nexport const useLogout = () => firebase.auth().signOut();\n\nexport const setProviders = () => {\n  fbprovider = new firebase.auth.FacebookAuthProvider();\n  gprovider = new firebase.auth.GoogleAuthProvider();\n  firebase.auth().useDeviceLanguage();\n  fbprovider.setCustomParameters({ 'display': 'popup' });\n}\n\nexport const useLogin = data => {\n  if (data.type === true) firebase.auth().createUserWithEmailAndPassword(data.email, data.pass).catch(data.err);\n  else if (data.type === false) firebase.auth().signInWithEmailAndPassword(data.email, data.pass).catch(data.err);\n  else if (data.type === \"fb\") firebase.auth().signInWithRedirect(fbprovider).catch(data.err);\n  else if (data.type === \"g\")firebase.auth().signInWithRedirect(gprovider).catch(data.err);\n}\n\nexport const useAuth = listen => {\n  useEffect(() => {\n    const unsubscribe = firebase.auth().onAuthStateChanged(user => {\n      if (user) listen(user);\n      else listen(false);\n    });\n    return () => unsubscribe();\n  }, []);\n}\n\nexport const user = firebase.auth().currentUser;\n"]},"metadata":{},"sourceType":"module"}