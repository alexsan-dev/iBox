{"ast":null,"code":"import React, { useEffect, useRef, useContext, useState } from 'react';\nimport firebase from '../credentials/servers';\nimport Dexie from 'dexie';\nimport 'firebase/auth'; //local DB\n\nvar db = {};\nexport var useDB = function useDB() {\n  db = new Dexie(\"localDB\");\n  db.version(1).stores({\n    user: 'key, user'\n  });\n  db.open().then(function () {\n    return console.log(\"OpenDB\");\n  }).catch(function (err) {\n    return console.log(\"Error during open db \", err);\n  });\n}; // Intervals for states\n\nexport var useInterval = function useInterval(callback, delay) {\n  var savedCallback = useRef();\n  useEffect(function () {\n    savedCallback.current = callback;\n  }, [callback]);\n  useEffect(function () {\n    function tick() {\n      savedCallback.current();\n    }\n\n    if (delay !== null) {\n      var id = setInterval(tick, delay);\n      return function () {\n        return clearInterval(id);\n      };\n    }\n  }, [delay]);\n}; // Firebase Auth\n\nvar fbprovider, gprovider;\nexport var useLogout = function useLogout() {\n  return firebase.auth().signOut();\n};\nexport var setProviders = function setProviders() {\n  fbprovider = new firebase.auth.FacebookAuthProvider();\n  gprovider = new firebase.auth.GoogleAuthProvider();\n  firebase.auth().useDeviceLanguage();\n  fbprovider.setCustomParameters({\n    'display': 'popup'\n  });\n};\nexport var useLogin = function useLogin(type, email, pass) {\n  if (type === true) firebase.auth().createUserWithEmailAndPassword(email, pass);else if (type === false) firebase.auth().signInWithEmailAndPassword(email, pass);else if (type === \"fb\") firebase.auth().signInWithRedirect(fbprovider);else if (type === \"g\") firebase.auth().signInWithRedirect(gprovider);\n};\nexport var useAuth = function useAuth(listen) {\n  useEffect(function () {\n    var unsubscribe = firebase.auth().onAuthStateChanged(function (user) {\n      if (user) listen(user);else listen(false);\n    });\n    return function () {\n      return unsubscribe();\n    };\n  }, []);\n};\nexport var user = firebase.auth().currentUser;","map":null,"metadata":{},"sourceType":"module"}